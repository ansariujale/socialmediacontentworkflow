<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Social Media Content Generator</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      background: white;
      width: 100%;
      max-width: 900px;
      margin: 20px;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      overflow: hidden;
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .header {
      background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    h1 {
      margin: 0;
      font-size: 2.5em;
      font-weight: 300;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .progress-bar {
      display: flex;
      justify-content: space-between;
      padding: 20px 30px;
      background: #f8f9fa;
      border-bottom: 1px solid #e9ecef;
    }

    .progress-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      position: relative;
    }

    .progress-step:not(:last-child)::after {
      content: '';
      position: absolute;
      top: 15px;
      left: 50%;
      width: calc(100% - 30px);
      height: 2px;
      background: #ddd;
      z-index: 1;
    }

    .progress-step.completed:not(:last-child)::after {
      background: #4CAF50;
    }

    .step-circle {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: #ddd;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      margin-bottom: 8px;
      position: relative;
      z-index: 2;
      transition: all 0.3s ease;
    }

    .progress-step.completed .step-circle {
      background: #4CAF50;
    }

    .progress-step.active .step-circle {
      background: #2196F3;
      transform: scale(1.1);
    }

    .step-label {
      font-size: 12px;
      color: #666;
      text-align: center;
    }

    .progress-step.active .step-label {
      color: #2196F3;
      font-weight: bold;
    }

    .progress-step.completed .step-label {
      color: #4CAF50;
    }

    .content {
      padding: 40px;
    }

    .step {
      display: none;
      animation: fadeIn 0.3s ease-in;
    }

    .step.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .form-group {
      margin-bottom: 25px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
      font-size: 16px;
    }

    input[type="text"] {
      width: 100%;
      padding: 15px 20px;
      border: 2px solid #e1e5e9;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s ease;
      background: #f8f9fa;
    }

    input[type="text"]:focus {
      border-color: #4CAF50;
      background: white;
      box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
      outline: none;
    }

    input[type="text"]::placeholder {
      color: #adb5bd;
    }

    .btn {
      background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
      color: white;
      padding: 15px 30px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
    }

    .btn:disabled {
      background: #cccccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .btn-secondary {
      background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
    }

    .btn-secondary:hover:not(:disabled) {
      box-shadow: 0 6px 20px rgba(33, 150, 243, 0.3);
    }

    .loading {
      text-align: center;
      color: #666;
      padding: 40px;
      font-size: 18px;
    }

    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #4CAF50;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .results {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      padding: 30px;
      border-radius: 15px;
      margin: 30px 0;
      border: 1px solid #dee2e6;
    }

    .results h3 {
      color: #333;
      margin-top: 0;
      margin-bottom: 15px;
      font-size: 20px;
    }

    .results p {
      margin: 10px 0;
      line-height: 1.6;
      color: #555;
    }

    .results ul {
      padding-left: 20px;
    }

    .results li {
      margin: 8px 0;
      color: #555;
    }

    .review-section {
      margin-bottom: 30px;
      padding: 20px;
      background: rgba(255,255,255,0.8);
      border-radius: 10px;
      border: 1px solid #e1e5e9;
    }

    .review-section h3 {
      margin-top: 0;
      margin-bottom: 15px;
      color: #2196F3;
      font-size: 18px;
      border-bottom: 2px solid #e1e5e9;
      padding-bottom: 10px;
    }

    .headlines-list {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #4CAF50;
    }

    .headlines-list ul {
      margin: 0;
      padding-left: 20px;
    }

    .headlines-list li {
      margin: 10px 0;
      padding: 8px 0;
      border-bottom: 1px solid #dee2e6;
      color: #495057;
      font-weight: 500;
    }

    .headlines-list li:last-child {
      border-bottom: none;
    }

    .summary-text {
      background: #f0f8ff;
      padding: 20px;
      border-radius: 8px;
      border-left: 4px solid #2196F3;
      font-size: 16px;
      line-height: 1.7;
      color: #495057;
    }

    .social-media-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 30px 0;
    }

    .social-option {
      display: flex;
      align-items: center;
      padding: 20px;
      border: 2px solid #e1e5e9;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .social-option:hover {
      border-color: #4CAF50;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.1);
    }

    .social-option.selected {
      border-color: #4CAF50;
      background: linear-gradient(135deg, #e8f5e8 0%, #f0f9f0 100%);
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);
    }

    .social-option input[type="checkbox"] {
      margin-right: 15px;
      transform: scale(1.3);
      accent-color: #4CAF50;
    }

    .social-option label {
      font-weight: 600;
      color: #333;
      cursor: pointer;
      margin-bottom: 0;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      margin: 30px 0;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
      border: 2px solid #e1e5e9;
    }

    .checkbox-group input[type="checkbox"] {
      margin-right: 15px;
      transform: scale(1.4);
      accent-color: #4CAF50;
    }

    .checkbox-group label {
      font-weight: 600;
      color: #333;
      cursor: pointer;
      margin-bottom: 0;
    }

    .content-preview {
      background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
      padding: 25px;
      border-radius: 12px;
      margin: 20px 0;
      border-left: 5px solid #4CAF50;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .content-preview h4 {
      margin: 0 0 15px 0;
      color: #2196F3;
      font-size: 18px;
    }

    .content-preview p {
      margin: 8px 0;
      line-height: 1.6;
      color: #555;
    }

    .alert {
      padding: 15px 20px;
      border-radius: 10px;
      margin: 20px 0;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 500;
    }

    .alert.error {
      color: #d32f2f;
      background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
      border: 1px solid #e57373;
    }

    .alert.success {
      color: #2e7d32;
      background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
      border: 1px solid #66bb6a;
    }

    .btn-group {
      display: flex;
      gap: 15px;
      margin-top: 30px;
      justify-content: center;
    }

    @media (max-width: 768px) {
      .container {
        margin: 10px;
        border-radius: 15px;
      }

      .header {
        padding: 20px;
      }

      h1 {
        font-size: 2em;
      }

      .content {
        padding: 20px;
      }

      .progress-bar {
        padding: 15px 20px;
      }

      .social-media-options {
        grid-template-columns: 1fr;
      }

      .btn-group {
        flex-direction: column;
      }

      .btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üöÄ Social Media Content Generator</h1>
    </div>

    <div class="progress-bar">
      <div class="progress-step active" id="progress1">
        <div class="step-circle">1</div>
        <div class="step-label">Input</div>
      </div>
      <div class="progress-step" id="progress2">
        <div class="step-circle">2</div>
        <div class="step-label">Review</div>
      </div>
      <div class="progress-step" id="progress3">
        <div class="step-circle">3</div>
        <div class="step-label">Post</div>
      </div>
    </div>

    <div class="content">

    <!-- Step 1: Initial Input -->
    <div id="step1" class="step active">
      <h2>üìù Enter Content Source</h2>
      <p>Provide a keyword, URL, or text prompt to generate social media content</p>
      <form id="initialForm">
        <div class="form-group">
          <label for="userInput">‚ú® Keyword / URL / Text Prompt:</label>
          <input type="text" id="userInput" name="userInput" placeholder="e.g., 'Latest AI news' or 'https://example.com/article' or 'Write about climate change'" required>
        </div>
        <div class="btn-group">
          <button type="submit" id="initialSubmit" class="btn">
            <span>üöÄ Generate Content</span>
          </button>
        </div>
      </form>
      <div id="initialMessage"></div>
    </div>

    <!-- Step 2: Review Page -->
    <div id="step2" class="step">
      <h2>üìã Review & Configure</h2>
      <p>Review your content and configure posting options</p>

      <div id="resultsContainer" class="results">
        <div class="loading" id="resultsLoading">
          <div class="spinner"></div>
          <p>Generating content from your input...</p>
        </div>
        <div id="resultsContent" style="display: none;">
          <!-- Source Headlines Section -->
          <div class="review-section">
            <h3>üì∞ Source Headlines</h3>
            <div id="sourceHeadlines" class="headlines-list"></div>
          </div>

          <!-- Source Summary Section -->
          <div class="review-section">
            <h3>üìù Source Summary</h3>
            <div id="contentSummary" class="summary-text"></div>
          </div>

          <!-- Social Media Options Section -->
          <div class="review-section">
            <h3>üåê Select Social Media Platforms</h3>
            <div class="social-media-options" id="socialOptions">
              <div class="social-option" data-platform="linkedin">
                <input type="checkbox" id="linkedin" value="linkedin">
                <label for="linkedin">üíº LinkedIn</label>
              </div>
              <div class="social-option" data-platform="twitter">
                <input type="checkbox" id="twitter" value="twitter">
                <label for="twitter">üê¶ Twitter</label>
              </div>
              <div class="social-option" data-platform="instagram">
                <input type="checkbox" id="instagram" value="instagram">
                <label for="instagram">üì∑ Instagram</label>
              </div>
              <div class="social-option" data-platform="facebook">
                <input type="checkbox" id="facebook" value="facebook">
                <label for="facebook">üìò Facebook</label>
              </div>
              <div class="social-option" data-platform="blog">
                <input type="checkbox" id="blog" value="blog">
                <label for="blog">üìù Blog</label>
              </div>
            </div>
          </div>

          <!-- Image Checkbox Section -->
          <div class="review-section">
            <div class="checkbox-group">
              <input type="checkbox" id="includeImage" name="includeImage">
              <label for="includeImage">üì∑ Include image in posts</label>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="btn-group">
            <button id="reviewSubmit" class="btn">
              <span>‚úÖ Submit Configuration</span>
            </button>
          </div>
        </div>
      </div>
      <div id="step2Message"></div>
    </div>

    <!-- Step 3: Content Preview and Final Submit -->
    <div id="step3" class="step">
      <h2>üöÄ Final Preview & Post</h2>
      <p>Review your content and publish to selected platforms</p>
      <div id="previewContainer">
        <div class="loading" id="previewLoading">
          <div class="spinner"></div>
          <p>Generating preview...</p>
        </div>
        <div id="previewContent" style="display: none;">
          <div id="finalContent"></div>
          <div class="btn-group">
            <button id="finalSubmit" class="btn">
              <span>üì§ Post to Selected Platforms</span>
            </button>
          </div>
        </div>
      </div>
      <div id="step3Message"></div>
    </div>
  </div>

  <script>
    // Constants - Replace with your n8n webhook URL
    const N8N_WORKFLOW_URL = "YOUR_N8N_WEBHOOK_URL_HERE";

    // DOM Elements
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const initialForm = document.getElementById('initialForm');
    const initialSubmit = document.getElementById('initialSubmit');
    const reviewSubmit = document.getElementById('reviewSubmit');
    const finalSubmit = document.getElementById('finalSubmit');
    const resultsLoading = document.getElementById('resultsLoading');
    const resultsContent = document.getElementById('resultsContent');
    const previewLoading = document.getElementById('previewLoading');
    const previewContent = document.getElementById('previewContent');

    let contentData = null;
    let selectedPlatforms = [];

    // Utility functions
    function showStep(stepNum) {
      [step1, step2, step3].forEach(step => step.classList.remove('active'));
      document.getElementById(`step${stepNum}`).classList.add('active');

      // Update progress bar
      for (let i = 1; i <= 3; i++) {
        const progressStep = document.getElementById(`progress${i}`);
        if (i < stepNum) {
          progressStep.classList.add('completed');
          progressStep.classList.remove('active');
        } else if (i === stepNum) {
          progressStep.classList.add('active');
          progressStep.classList.remove('completed');
        } else {
          progressStep.classList.remove('active', 'completed');
        }
      }
    }

    function showMessage(elementId, message, type = 'error') {
      const element = document.getElementById(elementId);
      element.innerHTML = `<div class="alert ${type}">${message}</div>`;
    }

    function clearMessage(elementId) {
      document.getElementById(elementId).innerHTML = '';
    }

    // Step 1: Initial form submission
    initialForm.addEventListener('submit', async function(e) {
      e.preventDefault();

      const input = document.getElementById('userInput').value.trim();

      if (!input) {
        showMessage('initialMessage', 'Please enter a keyword, URL, or text prompt.');
        return;
      }

      initialSubmit.disabled = true;
      initialSubmit.innerHTML = '<span>‚è≥ Generating...</span>';
      clearMessage('initialMessage');

      try {
        // Simulate API call for frontend testing - remove fetch for testing
        console.log('Simulating API call with input:', input);

        // Mock response data for testing
        const mockData = {
          summary: "This is a sample summary generated from your input: '" + input + "'. In a real implementation, this would come from your n8n workflow.",
          headline1: "Breaking: Major Development in " + input,
          headline2: "New Insights About " + input + " Revealed",
          headline3: "Industry Experts Discuss " + input + " Trends",
          content: "This is sample content that would be generated based on your input. The actual content would be processed by your n8n workflow and returned here."
        };

        contentData = mockData;

        // Simulate processing delay
        setTimeout(() => {
          displayResults(mockData);
          showStep(2);
        }, 2000);

      } catch (error) {
        console.error('Error:', error);
        showMessage('initialMessage', `Error: ${error.message || 'Failed to generate content. Please try again.'}`);
      } finally {
        initialSubmit.disabled = false;
        initialSubmit.innerHTML = '<span>üöÄ Generate Content</span>';
      }
    });

    // Display results in step 2
    function displayResults(data) {
      resultsLoading.style.display = 'none';
      resultsContent.style.display = 'block';

      // Mock data - replace with actual n8n response structure
      document.getElementById('contentSummary').innerHTML = `
        <p><strong>Summary:</strong> ${data.summary || 'Content summary will appear here based on your input.'}</p>
      `;

      document.getElementById('sourceHeadlines').innerHTML = `
        <ul>
          <li>${data.headline1 || 'Main headline from source'}</li>
          <li>${data.headline2 || 'Secondary headline from source'}</li>
          <li>${data.headline3 || 'Additional headline from source'}</li>
        </ul>
      `;
    }

    // Social media selection
    document.getElementById('socialOptions').addEventListener('change', function(e) {
      if (e.target.type === 'checkbox') {
        const option = e.target.closest('.social-option');
        if (e.target.checked) {
          option.classList.add('selected');
          selectedPlatforms.push(e.target.value);
        } else {
          option.classList.remove('selected');
          selectedPlatforms = selectedPlatforms.filter(p => p !== e.target.value);
        }
      }
    });

    // Review submit button
    reviewSubmit.addEventListener('click', function() {
      if (selectedPlatforms.length === 0) {
        showMessage('step2Message', 'Please select at least one social media platform.');
        return;
      }

      clearMessage('step2Message');
      reviewSubmit.disabled = true;
      reviewSubmit.innerHTML = '<span>‚è≥ Processing...</span>';

      // Simulate processing and move to preview step
      setTimeout(() => {
        showStep(3);
        generatePreview();
        reviewSubmit.disabled = false;
        reviewSubmit.innerHTML = '<span>‚úÖ Submit Configuration</span>';
      }, 1000);
    });

    // Generate content preview
    function generatePreview() {
      const includeImage = document.getElementById('includeImage').checked;
      let previewHTML = '<h3>üöÄ Ready to Post - Final Preview</h3><p>Review your content for each selected platform:</p>';

      selectedPlatforms.forEach(platform => {
        const platformContent = generatePlatformContent(platform, contentData);
        const charCount = platformContent.length;

        previewHTML += `
          <div class="content-preview">
            <h4>${getPlatformIcon(platform)} ${platform.charAt(0).toUpperCase() + platform.slice(1)}</h4>
            <p><strong>Content:</strong> ${platformContent}</p>
            <p><small>üìä Character count: ${charCount}</small></p>
            ${includeImage ? '<p><em>üì∑ Image will be included</em></p>' : ''}
          </div>
        `;
      });

      document.getElementById('finalContent').innerHTML = previewHTML;
      previewLoading.style.display = 'none';
      previewContent.style.display = 'block';
    }

    // Get platform icon
    function getPlatformIcon(platform) {
      const icons = {
        linkedin: 'üíº',
        twitter: 'üê¶',
        instagram: 'üì∑',
        facebook: 'üìò',
        blog: 'üìù'
      };
      return icons[platform] || 'üì±';
    }

    // Generate platform-specific content (mock implementation)
    function generatePlatformContent(platform, data) {
      const baseContent = data.content || "Generated content based on your input will appear here.";
      switch(platform) {
        case 'linkedin':
          return baseContent.substring(0, 3000) + (baseContent.length > 3000 ? '...' : '');
        case 'twitter':
          return baseContent.substring(0, 280) + (baseContent.length > 280 ? '...' : '');
        case 'instagram':
          return baseContent.substring(0, 2200) + (baseContent.length > 2200 ? '...' : '');
        case 'facebook':
          return baseContent;
        case 'blog':
          return baseContent; // No character limit for blog posts
        default:
          return baseContent;
      }
    }

    // Final submit
    finalSubmit.addEventListener('click', async function() {
      finalSubmit.disabled = true;
      finalSubmit.innerHTML = '<span>‚è≥ Posting...</span>';
      clearMessage('step3Message');

      try {
        // Simulate posting for frontend testing - remove fetch for testing
        const postData = {
          platforms: selectedPlatforms,
          content: contentData,
          includeImage: document.getElementById('includeImage').checked
        };

        console.log('Simulating post to platforms:', postData);

        // Simulate successful posting
        setTimeout(() => {
          showMessage('step3Message', 'üéâ Content posted successfully to selected platforms! (Simulated for testing)', 'success');

          // Reset form after successful post
          setTimeout(() => {
            location.reload();
          }, 3000);
        }, 2000);

      } catch (error) {
        console.error('Error posting:', error);
        showMessage('step3Message', `‚ùå Error: ${error.message || 'Failed to post content. Please try again.'}`);
      } finally {
        finalSubmit.disabled = false;
        finalSubmit.innerHTML = '<span>üì§ Post to Selected Platforms</span>';
      }
    });
  </script>
</body>
</html>
